# 完成與刪除待辦事項 {#checkingoffanddeletingtasks}

到目前為止，我們只透過插入文件\(insert documents\)的方式來與資料庫互動。接下來我們將會學習如何更新\(update\)或是刪除\(remove\)文件。

現在，讓我們來修改`task`模板\(template\)吧!首先，我們把它移到獨立的檔案，並且加入一個勾選框\(checkbox\)和一個刪除鈕:

[imports/ui/task.html»](https://github.com/meteor/simple-todos/commit/0f5a29b2ec349b1beefaea65da8795669eb3fbd6)

```
<template name="task">
  <li class="{{#if checked}}checked{{/if}}">
    <button class="delete">&times;</button>
    
    <input type="checkbox" checked="{{checked}}" class="toggle-checked" />
    
    <span class="text">{{text}}</span>
  </li>
</template>
```

同時把舊的`task`模板從`imports/ui/body.html`檔案中刪除。

再來加入一些事件處理器\(event handlers\)，來讓勾選框和刪除鈕產生作用:

[imports/ui/task.js»](https://github.com/meteor/simple-todos/commit/9662f35f00dfc5bc0f5b6b363f17324d785b6684)

```
import { Template } from 'meteor/templating';
import { Tasks } from '../api/tasks.js';
import './task.html';

Template.task.events({
  'click .toggle-checked'() {
    // Set the checked property to the opposite of its current value
    Tasks.update(this._id, {
      $set: { checked: !this.checked },
    });
  },
  'click .delete'() {
    Tasks.remove(this._id);
  },
});
```

由於`body`模板使用到`task`模板，所以我們必須載入它:

[imports/ui/body.js»](https://github.com/meteor/simple-todos/commit/95760055fbe30f22a0f05154fbfb70628fa4d80b)

```
import { Tasks } from '../api/tasks.js';

import './task.js';
import './body.html';

Template.body.helpers({
```

### Getting data in event handlers {#gettingdataineventhandlers}

Inside the event handlers,`this`refers to an individual task object. In a collection, every inserted document has a unique`_id`field that can be used to refer to that specific document. We can get the`_id`of the current task with`this._id`. Once we have the`_id`, we can use`update`and`remove`to modify the relevant task.

### Update {#update}

The`update`function on a collection takes two arguments. The first is a selector that identifies a subset of the collection, and the second is an update parameter that specifies what should be done to the matched objects.

In this case, the selector is just the`_id`of the relevant task. The update parameter uses`$set`to toggle the`checked`field, which will represent whether the task has been completed.

### Remove {#remove}

The`remove`function takes one argument, a selector that determines which item to remove from the collection.

### Using object properties or helpers to add/remove classes {#usingobjectpropertiesorhelperstoaddremoveclasses}

If you try checking off some tasks after adding all of the above code, you will see that checked off tasks have a line through them. This is enabled by the following snippet:

```
<li class="{{#if checked}}checked{{/if}}">
```

With this code, if the`checked`property of a task is`true`, the`checked`class is added to our list item. Using this class, we can make checked-off tasks look different in our CSS.

